<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/base :: layout(~{::title}, ~{::div.content})}">
<head>
    <title>All Packages</title>
</head>
<div class="content">
    <h1>All Tour Packages</h1>
    
    <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
    <div th:if="${errorMessage}" class="alert alert-error" th:text="${errorMessage}"></div>

    <div class="table-controls">
        <a th:href="@{/package/create}" class="btn btn-primary" style="font-size: 0.9em;">+ Create New Package</a>
        <input type="text" placeholder="Search packages..." class="form-control" style="width: 300px;">
    </div>

    <div th:if="${#lists.isEmpty(listPackage)}" class="empty-state">
        <h2 style="color: var(--text-dark); margin-top: 0;">No Packages Yet</h2>
        <p style="color: var(--text-muted);">Start creating your first tour package to see it here.</p>
        <a th:href="@{/package/create}" class="btn btn-secondary">Create First Package</a>
    </div>

    <table th:if="${not #lists.isEmpty(listPackage)}" class="data-table">
        <thead>
            <tr>
                <th>Package Name</th>
                <th>Period</th>
                <th>Quota</th>
                <th>Price</th>
                <th>Status</th>
                <th style="text-align: center;">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="package : ${listPackage}">
                <td th:text="${package.packageName}" style="font-weight: 600;"></td>
                <td style="font-size: 0.9em;">
                    <span th:text="${#temporals.format(package.startDate, 'dd MMM yyyy')}"></span> <br>
                    to <span th:text="${#temporals.format(package.endDate, 'dd MMM yyyy')}"></span>
                </td>
                <td th:text="${package.quota}" style="text-align: center;"></td>
                <td th:text="${package.formattedPrice}" style="color: var(--success-color); font-weight: 700;"></td>
                <td>
                    <span th:text="${package.status}" class="status-badge"
                          th:classappend="${package.status == 'Processed' ? 'status-processed' : 'status-pending'}">
                    </span>
                </td>
                <td class="action-buttons">
                    <a th:href="@{/package/{id}(id=${package.id})}" class="btn btn-info action-sm">View</a>
                    <a th:href="@{/package/update/{id}(id=${package.id})}" class="btn btn-primary action-sm">Edit</a>
                    <form th:action="@{/package/delete/{id}(id=${package.id})}" method="POST" style="display: inline;">
                        <input type="hidden" name="_method" value="POST" /> 
                        <button type="submit" class="btn btn-danger action-sm" onclick="return confirm('Confirm deletion of ' + ${package.packageName} + '?')">Delete</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
    <style>
        .table-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .empty-state { text-align: center; padding: 60px; background-color: var(--peach-soft); border-radius: 10px; margin-top: 30px; border: 1px dashed var(--peach-primary); }
        
        .data-table { border-collapse: collapse; box-shadow: var(--shadow-subtle); border-radius: 8px; overflow: hidden; }
        .data-table th { background-color: var(--peach-primary); font-weight: 700; color: var(--text-dark); }
        .data-table th, .data-table td { padding: 15px; border-bottom: 1px solid #f0f0f0; }
        .data-table tbody tr:last-child td { border-bottom: none; }
        .data-table tbody tr:hover { background-color: rgba(255, 218, 185, 0.15); }

        .status-badge { padding: 6px 12px; border-radius: 20px; font-size: 0.75em; font-weight: 700; }
        .status-processed { background-color: #d4edda; color: #155724; }
        .status-pending { background-color: #fff3cd; color: #856404; }
        
        .action-buttons { display: flex; justify-content: center; align-items: center; gap: 5px; }
        .action-sm { font-size: 0.75em; padding: 6px 12px; }
    </style>
</div>
</html>